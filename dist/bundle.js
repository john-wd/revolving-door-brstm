!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t,a){"use strict";function n(e,t,a,n){if(this.fromSampleRate=+e,this.toSampleRate=+t,this.channels=0|a,"object"!=typeof n)throw new Error("inputBuffer is not an object.");if(!(n instanceof Array||n instanceof Float32Array||n instanceof Float64Array))throw new Error("inputBuffer is not an array or a float32 or a float64 array.");this.inputBuffer=n,this.initialize()}n.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error("Invalid settings specified for the resampler.");this.fromSampleRate==this.toSampleRate?(this.resampler=this.bypassResampler,this.ratioWeight=1,this.outputBuffer=this.inputBuffer):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers())},n.prototype.compileLinearInterpolationFunction=function(){for(var e="var outputOffset = 0;    if (bufferLength > 0) {        var buffer = this.inputBuffer;        var weight = this.lastWeight;        var firstWeight = 0;        var secondWeight = 0;        var sourceOffset = 0;        var outputOffset = 0;        var outputBuffer = this.outputBuffer;        for (; weight < 1; weight += "+this.ratioWeight+") {            secondWeight = weight % 1;            firstWeight = 1 - secondWeight;",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (this.lastOutput["+t+"] * firstWeight) + (buffer["+t+"] * secondWeight);";e+="}        weight -= 1;        for (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; sourceOffset < bufferLength;) {            secondWeight = weight % 1;            firstWeight = 1 - secondWeight;";for(t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(t>0?" + "+t:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+t)+"] * secondWeight);";e+="weight += "+this.ratioWeight+";            sourceOffset = Math.floor(weight) * "+this.channels+";        }";for(t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = buffer[sourceOffset++];";e+="this.lastWeight = weight % 1;    }    return outputOffset;",this.resampler=Function("bufferLength",e)},n.prototype.compileMultiTapFunction=function(){for(var e="var outputOffset = 0;    if (bufferLength > 0) {        var buffer = this.inputBuffer;        var weight = 0;",t=0;t<this.channels;++t)e+="var output"+t+" = 0;";for(e+="var actualPosition = 0;        var amountToNext = 0;        var alreadyProcessedTail = !this.tailExists;        this.tailExists = false;        var outputBuffer = this.outputBuffer;        var currentPosition = 0;        do {            if (alreadyProcessedTail) {                weight = "+this.ratioWeight+";",t=0;t<this.channels;++t)e+="output"+t+" = 0;";for(e+="}            else {                weight = this.lastWeight;",t=0;t<this.channels;++t)e+="output"+t+" = this.lastOutput["+t+"];";for(e+="alreadyProcessedTail = true;            }            while (weight > 0 && actualPosition < bufferLength) {                amountToNext = 1 + actualPosition - currentPosition;                if (weight >= amountToNext) {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition++] * amountToNext;";for(e+="currentPosition = actualPosition;                    weight -= amountToNext;                }                else {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition"+(t>0?" + "+t:"")+"] * weight;";for(e+="currentPosition += weight;                    weight = 0;                    break;                }            }            if (weight <= 0) {",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = output"+t+" / "+this.ratioWeight+";";for(e+="}            else {                this.lastWeight = weight;",t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = output"+t+";";e+="this.tailExists = true;                break;            }        } while (actualPosition < bufferLength);    }    return outputOffset;",this.resampler=Function("bufferLength",e)},n.prototype.bypassResampler=function(e){return e},n.prototype.initializeBuffers=function(){var e=Math.ceil(this.inputBuffer.length*this.toSampleRate/this.fromSampleRate/this.channels*1.0000004768371582)*this.channels+this.channels;try{this.outputBuffer=new Float32Array(e),this.lastOutput=new Float32Array(this.channels)}catch(e){this.outputBuffer=[],this.lastOutput=[]}},e.exports=n},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n);const s=a(2),o=a(3),r=a(4),{STREAMING_MIN_RESPONSE:l}=a(5),u=a(6),h=a(7);function f(e,t,a){let n=[],i=0;for(let t=0;t<e.metadata.numberChannels;t++)n.push(new Int16Array(a));for(;i<a;){let s=e.getSamples(t+i,Math.min(e.metadata.samplesPerBlock,a-i));for(let e=0;e<s.length;e++)n[e].set(s[e],i);i+=Math.min(e.metadata.samplesPerBlock,a-i)}return n}let c=!1,d=null,p=null,m=null,g=null,v=!0,y=0,w=0,S=null,b=null,k=!1,T=!1,_=!1,C=!1,B=0,x=localStorage.getItem("volumeoverride")||1;function D(){h.updateState({position:w,paused:k,volume:x,loaded:B,looping:T})}async function R(e){let t=await fetch(e),a=await t.arrayBuffer();S=new r.Brstm(a),v=!0,y=Number.MAX_SAFE_INTEGER,B=Number.MAX_SAFE_INTEGER}function M(e){return new Promise(async(t,a)=>{let n,i;try{n=await fetch(e),i=(await n.body).getReader()}catch(e){return a(e)}b=new ArrayBuffer(parseInt(n.headers.get("content-length")));let s=new Uint8Array(b),o=0,u=!1,f=0;for(B=0,v=!1,_=!1;;){let e;try{e=await i.read()}catch(e){return void(u?(h.updateState({streamingDied:!0,buffering:!1,ready:!0}),await p.close(),p=null):a(e))}if(_)return await i.cancel(),void window.postMessage("continueload");if(e.done){if(!u)try{S=new r.Brstm(b),t(),u=!0}catch(e){return void a(e)}v=!0,B=Number.MAX_SAFE_INTEGER,console.log("File finished streaming");break}if(s.set(e.value,o),o+=e.value.length,y=o,0==f&&o>128){let e=0;65279==256*s[4]+s[5]&&(e=1),f=1==e?16777216*s[112]+65536*s[113]+256*s[114]+s[115]:s[112]+256*s[113]+65536*s[114]+16777216*s[115],f<144&&(f=l)}if(!u&&0!=f&&o>f)try{S=new r.Brstm(b),t(),u=!0}catch(e){return void a(e)}u&&(B=Math.floor((y-f)/S.metadata.numberChannels/S.metadata.blockSize)*S.metadata.samplesPerBlock)}})}const E={setVolume:function(e){x=e,D(),g&&g.gain.setValueAtTime(x,p.currentTime)},seek:function(e){w=Math.floor(e),D()},pause:function(){k=!k,p[k?"suspend":"resume"](),D()},setLoop:function(e){T=e,D()}};window.player={play:async function(e){if(c||(d=await s(),c=!0,h.runGUI(E),setInterval((function(){h.updateState({loaded:B}),h.guiUpdate()}),100)),C)return;var t,a;C=!0,v||(console.log("Cancelling last stream..."),_=!0,await(t="continueload",new Promise((function(e){window.addEventListener("message",(function a(n){n.data===t&&n.isTrusted&&(window.removeEventListener("message",a),e())}))}))),console.log("Done.")),p&&(await p.close(),p=null),w=0,k=!1,h.updateState({ready:!1,position:0,samples:1e6,loaded:0,volume:x,paused:!1,buffering:!1,sampleRate:44100,streamingDied:!1});try{await(d.streaming?M:R)(e)}catch(e){return h.updateState({streamingDied:!0,ready:!0,buffering:!1}),console.error(e),void(C=!1)}p=new(window.AudioContext||window.webkitAudioContext)(d.sampleRate?{sampleRate:S.metadata.sampleRate}:{}),T=1===S.metadata.loopFlag,await o(p),d.streaming&&await(a=1e3,new Promise(e=>setTimeout(e,a))),m=p.createScriptProcessor(0,0,2);let n=m.bufferSize;var r,l,y;n=d.sampleRate?n:(r=p.sampleRate,l=S.metadata.sampleRate,y=n,Math.ceil(y/r*l));let b=n;d.sampleRate||(b+=20),h.updateState({ready:!0,samples:S.metadata.totalSamples}),h.updateState({sampleRate:S.metadata.sampleRate}),C=!1,m.onaudioprocess=function(e){D();let t,a=e.outputBuffer;if(a.copyToChannel||(a.copyToChannel=u),w+n+1024>B)return h.updateState({buffering:!0}),console.log("Buffering...."),a.copyToChannel(new Float32Array(m.bufferSize).fill(0),0),void a.copyToChannel(new Float32Array(m.bufferSize).fill(0),1);if(h.updateState({buffering:!1}),k)return a.copyToChannel(new Float32Array(m.bufferSize).fill(0),0),void a.copyToChannel(new Float32Array(m.bufferSize).fill(0),1);if(w+b<S.metadata.totalSamples)t=f(S,w,b),w+=n;else if(T){t=f(S,w,S.metadata.totalSamples-w);let e=t[0].length;console.log(S.metadata.totalSamples-w,b-e);let a=f(S,S.metadata.loopStartSample,b-e);for(let e=0;e<t.length;e++){let n=new Int16Array(b).fill(0);n.set(t[e]),n.set(a[e],t[e].length),t[e]=n}w=S.metadata.loopStartSample+n-e}else{t=f(S,w,S.metadata.totalSamples-w-1);for(let e=0;e<t.length;e++){let a=new Int16Array(b).fill(0);a.set(t[e]),t[e]=a}w=0,k=!0,setTimeout((function(){p.suspend()}),200)}t.length>2&&(t=[t[0],t[1]]),1===t.length&&(t=[t[0],t[0]]);for(let e=0;e<t.length;e++){let n=new Float32Array(b);for(let a=0;a<b;a++)n[a]=t[e][a]/32768;if(!d.sampleRate){let e=new i.a(S.metadata.sampleRate,p.sampleRate,1,n);e.resampler(b),n=e.outputBuffer,n.length>m.bufferSize&&(n=n.slice(0,m.bufferSize))}a.copyToChannel(n,e)}},g=p.createGain(),m.connect(g),g.connect(p.destination),g.gain.setValueAtTime(x,p.currentTime)}}},function(e,t){e.exports=async function(){let e={sampleRate:!1,streaming:!1};try{let t=new(window.AudioContext||window.webkitAudioContext)({sampleRate:8e3});e.sampleRate=8e3===t.sampleRate,t.close().then(()=>console.log("Closed capability detection audio context."))}catch(e){console.log("WebAudio sample rate capability detection failed. Assuming fallback.")}try{let t=new Uint8Array(65536),a=new Blob([t],{type:"application/octet-stream"}),n=URL.createObjectURL(a),i=await fetch(n);const s=(await i.body).getReader();for(;;){if((await s.read()).done)break}e.streaming=!0}catch(e){console.log("Streaming capability detection failed. Assuming fallback.")}return e}},function(e,t){e.exports=function(e){return new Promise((async function(t){let a=!1,n=document.createElement("div");n.style="background: #888a; z-index: 88888; position: fixed; top: 0; bottom: 0; left: 0; right: 0; display: flex; align-items: center; justify-content: center;";let i=document.createElement("div");i.style="display: flex; align-items: center; justify-content: center; flex-direction: column",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" version="1.0"  width="200" height="200" viewBox="0 0 75 75">\n<path d="M39.389,13.769 L22.235,28.606 L6,28.606 L6,47.699 L21.989,47.699 L39.389,62.75 L39.389,13.769z"\nstyle="stroke:#fff;stroke-width:5;stroke-linejoin:round;fill:#fff;"\n/>\n<path d="M48,27.6a19.5,19.5 0 0 1 0,21.4M55.1,20.5a30,30 0 0 1 0,35.6M61.6,14a38.8,38.8 0 0 1 0,48.6" style="fill:none;stroke:#fff;stroke-width:5;stroke-linecap:round"/>\n</svg><h1 style="font-family: sans-serif; color: white; margin: 0;">Tap or click anywhere to enable audio.</h1>',n.appendChild(i),setTimeout((function(){a||document.body.appendChild(n)}),200),e.onstatechange=function(){"running"==e.state&&(t(),n.remove(),a=!0)};try{e.resume()}catch(e){console.error(e)}n.addEventListener("touchend",(async function(){await e.resume(),"running"===e.state&&(t(),n.remove(),a=!0)})),n.addEventListener("click",(async function(){await e.resume(),"running"===e.state&&(t(),n.remove(),a=!0)})),"running"===e.state&&(t(),n.remove(),a=!0)}))}},function(e,t){function a(e,t,a){for(var n=[],i=t;i<t+a;i++)n.push(e[i]);return n}function n(e,t,n,i){void 0===i&&(i=1);var s=a(e,t,n);return 0===i&&s.reverse(),s.reduce((function(e,t){return 256*e+t}),0)}function i(e,t,a){return e<=t?t:e>=a?a:e}function s(e){return e>=32768?e-65536:e}t.Brstm=function(){function e(e){if(this.rawData=new Uint8Array(e),"RSTM"!==function(e,t,n,i){void 0===i&&(i=1);var s=a(e,0,4);return 0===i&&s.reverse(),String.fromCharCode.apply(String,s)}(this.rawData))throw new Error("Not a valid BRSTM file");var t;this.endianness=255===(t=a(this.rawData,4,2))[0]&&254===t[1]?0:1,this._offsetToHead=n(this.rawData,16,4,this.endianness),this._offsetToHeadChunk1=this._offsetToHead+n(this.rawData,this._offsetToHead+12,4,this.endianness)+8,this._offsetToHeadChunk2=this._offsetToHead+n(this.rawData,this._offsetToHead+20,4,this.endianness)+8,this._offsetToHeadChunk3=this._offsetToHead+n(this.rawData,this._offsetToHead+28,4,this.endianness)+8,this._offsetToAdpc=n(this.rawData,24,4,this.endianness),this._offsetToData=n(this.rawData,32,4,this.endianness),this.metadata=this._getMetadata(),this._cachedSamples=null,this._partitionedAdpcChunkData=null,this._cachedChannelInfo=null,this._cachedBlockResults=[]}var t=e.prototype;return t._getChannelInfo=function(){if(this._cachedChannelInfo)return this._cachedChannelInfo;for(var e=this.metadata.numberChannels,t=[],a=0;a<e;a++){for(var i=this._offsetToHead+n(this.rawData,this._offsetToHeadChunk3+8+8*a,4,this.endianness)+8+8,o=[],r=0;r<16;r++){var l=n(this.rawData,i+2*r,2,this.endianness);o.push(s(l))}t.push({adpcmCoefficients:o,gain:n(this.rawData,i+40,2,this.endianness),initialPredictorScale:n(this.rawData,i+42,2,this.endianness),historySample1:n(this.rawData,i+44,2,this.endianness),historySample2:n(this.rawData,i+46,2,this.endianness),loopPredictorScale:n(this.rawData,i+48,2,this.endianness),loopHistorySample1:n(this.rawData,i+50,2,this.endianness),loopHistorySample2:n(this.rawData,i+52,2,this.endianness)})}return this._cachedChannelInfo=t,t},t._getMetadata=function(){var e=n(this.rawData,this._offsetToHeadChunk1+2,1,this.endianness);return{fileSize:n(this.rawData,8,4,this.endianness),endianness:this.endianness,codec:n(this.rawData,this._offsetToHeadChunk1,1,this.endianness),loopFlag:n(this.rawData,this._offsetToHeadChunk1+1,1,this.endianness),numberChannels:e,sampleRate:n(this.rawData,this._offsetToHeadChunk1+4,2,this.endianness),loopStartSample:n(this.rawData,this._offsetToHeadChunk1+8,4,this.endianness),totalSamples:n(this.rawData,this._offsetToHeadChunk1+12,4,this.endianness),totalBlocks:n(this.rawData,this._offsetToHeadChunk1+20,4,this.endianness),blockSize:n(this.rawData,this._offsetToHeadChunk1+24,4,this.endianness),samplesPerBlock:n(this.rawData,this._offsetToHeadChunk1+28,4,this.endianness),finalBlockSize:n(this.rawData,this._offsetToHeadChunk1+32,4,this.endianness),finalBlockSizeWithPadding:n(this.rawData,this._offsetToHeadChunk1+40,4,this.endianness),totalSamplesInFinalBlock:n(this.rawData,this._offsetToHeadChunk1+36,4,this.endianness),adpcTableSamplesPerEntry:n(this.rawData,this._offsetToHeadChunk1+44,4,this.endianness),adpcTableBytesPerEntry:n(this.rawData,this._offsetToHeadChunk1+48,4,this.endianness),numberTracks:n(this.rawData,this._offsetToHeadChunk2,1,this.endianness),trackDescriptionType:n(this.rawData,this._offsetToHeadChunk2+1,1,this.endianness)}},t._getPartitionedBlockData=function(e){for(var t=this.metadata,a=t.blockSize,n=t.totalBlocks,i=t.numberChannels,s=t.finalBlockSize,o=t.finalBlockSizeWithPadding,r=[],l=0;l<i;l++)r.push(new Uint8Array(e===n-1?s:a));for(var u=e,h=0;h<i;h++){var f=0!==h&&u+1===n?u*i*a+h*o:(u*i+h)*a,c=this.rawData.slice(this._offsetToData+32+f,this._offsetToData+32+(u+1===n?f+s:f+a));r[h].set(c)}return r},t._getPartitionedAdpcChunkData=function(){if(this._partitionedAdpcChunkData)return this._partitionedAdpcChunkData;for(var e=this.metadata,t=e.totalBlocks,a=e.numberChannels,i=n(this.rawData,this._offsetToAdpc+4,4,this.endianness),o=this.rawData.slice(this._offsetToAdpc+8,this._offsetToAdpc+8+i),r=0,l=0,u=0,h=0;h<a;h++)l=s(n(o,r,2,this.endianness)),u=s(n(o,r+=2,2,this.endianness)),r+=2;for(var f=[],c=0;c<t;c++){f.push([]);for(var d=0;d<a;d++)c>0&&(l=s(n(o,r,2,this.endianness)),u=s(n(o,r+=2,2,this.endianness)),r+=2),f[c].push({yn1:l,yn2:u})}for(var p=[],m=function(e){p.push(f.map((function(t){return t[e]})))},g=0;g<a;g++)m(g);return this._partitionedAdpcChunkData=p,p},t.getAllSamples=function(){if(this._cachedSamples)return this._cachedSamples;for(var e=this.metadata,t=e.numberChannels,a=e.totalSamples,n=e.totalBlocks,i=e.samplesPerBlock,s=[],o=0;o<t;o++)s.push(new Int16Array(a));for(var r=0;r<n;r++)for(var l=this._getSamplesAtBlock(r),u=0;u<t;u++)s[u].set(l[u],r*i);return this._cachedSamples=s,s},t._getSamplesAtBlock=function(e){if(this._cachedBlockResults[e])return this._cachedBlockResults[e];for(var t=this.metadata,a=t.numberChannels,o=t.totalBlocks,r=t.totalSamplesInFinalBlock,l=t.samplesPerBlock,u=t.codec,h=this._getChannelInfo(),f=this._getPartitionedBlockData(e),c=this._getPartitionedAdpcChunkData(),d=[],p=e===o-1?r:l,m=0;m<a;m++)d.push(new Int16Array(p));for(var g=0;g<a;g++){var v=h[g].adpcmCoefficients,y=f[g],w=[];if(2===u){for(var S=c[g][e],b=y[0],k=S.yn1,T=S.yn2,_=0,C=0;C<p;){var B=0;C%14==0&&(b=y[_++]),(B=0==(1&C++)?y[_]>>4:15&y[_++])>=8&&(B-=16);var x=b>>4<<1;B=1024+((1<<(15&b))*B<<11)+v[i(x,0,15)]*k+v[i(x+1,0,15)]*T>>11,T=k,k=i(B,-32768,32767),w.push(k)}e<o-1&&(c[g][e+1].yn1=w[p-1],c[g][e+1].yn2=w[p-2])}else if(1===u)for(var D=0;D<p;D++){var R=s(n(y,2*D,2,this.endianness));w.push(R)}else{if(0!==u)throw new Error("Invalid codec");for(var M=0;M<p;M++)w.push(s(y[M]))}d[g].set(w)}return this._cachedBlockResults[e]=d,d},t.getBuffer=function(e,t){return this.getSamples(e,t)},t.getSamples=function(e,t){for(var a=this.metadata,n=a.numberChannels,i=a.totalBlocks,s=a.totalSamples,o=a.samplesPerBlock,r=Math.max(0,e),l=Math.min(s,e+t),u=Math.max(0,Math.floor(r/o)),h=Math.min(i-1,Math.floor(l/o)),f=[],c=u;c<=h;c++)f.push(this._getSamplesAtBlock(c));for(var d=[],p=0;p<n;p++)d.push(new Int16Array(l-r));for(var m=u;m<=h;m++){var g=m-u;if(m===u&&m===h)for(var v=0;v<n;v++)d[v].set(f[g][v].slice(r-u*o,r-u*o+t),0);else if(m===u)for(var y=0;y<n;y++){var w=f[g][y].slice(r-u*o);d[y].set(w,0)}else if(m===h)for(var S=0;S<n;S++){var b=f[g][S].slice(0,l-f[g][S].length-u*o);d[S].set(b.length+(m*o-r)>d[S].length?b.slice(0,t-(m*o-r)):b,m*o-r)}else for(var k=0;k<n;k++)d[k].set(f[g][k],m*o-r)}return d},e}()},function(e,t){e.exports.STREAMING_MIN_RESPONSE=2**19},function(e,t){e.exports=function(e,t){let a=this.getChannelData(t);for(let t=0;t<e.length;t++)a[t]=e[t]}},function(e,t,a){const n=a(8);let i={position:0,samples:1e6,loaded:5e5,volume:1,paused:!1,ready:!1,buffering:!1,sampleRate:48e3,looping:!1,streamingDied:!1},s={volume:null,position:null},o={},r=null,l=null,u=null,h=-30;function f(t){try{t.preventDefault()}catch(e){}if(t.targetTouches.length>0){let a=t.targetTouches[0].target.getBoundingClientRect(),n=t.targetTouches[0].clientY+t.targetTouches[0].radiusY-a.top;n<5&&(n=0),n>80&&(n=84);let r=1-n/84;s.volume=r,"touchend"===t.type&&(i.volume=s.volume,o.setVolume(s.volume),s.volume=null,localStorage.setItem("volumeoverride",r)),e.exports.guiUpdate()}else"touchend"===t.type&&(i.volume=s.volume,o.setVolume(s.volume),s.volume=null)}function c(t){try{t.preventDefault()}catch(e){}if(t.targetTouches.length>0){let a=t.targetTouches[0].target.getBoundingClientRect(),n=t.targetTouches[0].clientX+t.targetTouches[0].radiusX-a.left;if(n<5&&(n=0),n>254&&(n=254),n=Math.round(n),n===h)return;h=n;let r=i.samples*(n/254);r<i.loaded&&(s.position=r),"touchend"===t.type&&(o.seek(s.position),s.position=null),e.exports.guiUpdate()}else"touchend"===t.type&&(o.seek(s.position),s.position=null)}function d(t,a){let n=Math.round(t),o=i.samples*(n/254);o<i.loaded&&(s.position=o),e.exports.guiUpdate()}function p(t,a){let n=Math.round(t),r=i.samples*(n/254);r<i.loaded&&(s.position=r),o.seek(r),s.position=null,e.exports.guiUpdate()}function m(t,a){a=Math.round(a),s.volume=1-a/84,e.exports.guiUpdate()}function g(t,a){let n=1-(a=Math.round(a))/84;s.volume=null,localStorage.setItem("volumeoverride",n),o.setVolume(n),e.exports.guiUpdate()}e.exports.updateState=function(e){Object.assign(i,e)},e.exports.runGUI=function(t){o=t,u=document.createElement("div"),u.classList.add("guiholder"),u.innerHTML='\n<div class="error" style="display: none">\n    <h3>Playback failed!</h3>\n    <h3>Check your internet and play again.</h3>\n    <h3>If this issue continues, contact us.</h3>\n</div>\n<div id="gui-loading-bar">\n    <div id="gui-inner-loading-bar"></div>\n</div>\n<div class="guistate" data-guistate="preload">\n    <h3>Loading song...</h3>\n</div>\n<div class="guistate" data-guistate="ready">\n    <div id="pl-pause-play">\n        <svg width="48" height="48" viewBox="0 0 48 48" id="pl-play">\n            <path d="M 10, 10 l 0, 28 l 28, -14" fill="white"></path>\n        </svg>\n        <svg width="48" height="48" viewBox="0 0 48 48" id="pl-pause" style="display: none;">\n            <path d="M 10, 10 l 0, 28 l 10, 0 l 0, -28 M 28, 10 l 0, 28 l 10, 0 l 0, -28" fill="white"></path>\n        </svg>\n    </div>\n    <canvas id="pl-volume" width="16" height="84" data-gesture-hitzone="volume"></canvas>\n    <div id="pl-timing">\n        <span id="pl-time-start">0:00</span>\n        <span id="pl-time-end"  >0:00</span>\n    </div>\n    <canvas id="pl-seek" width="254" height="16" data-gesture-hitzone="seek"></canvas>\n    <div id="pl-loop">\n        <input type="checkbox" id="pl-loop-box" style="width: 16px; height: 16px; margin: 0;">\n        <span class="pl-loop-text">Enable loop</span>\n        <a class="pl-loop-text" target="_blank" href="https://smashcustommusic.net/feedback/">Send feedback</a>\n        <a class="pl-loop-text" target="_blank" href="https://github.com/rphsoftware/revolving-door">v2 by Rph</a>\n    </div>\n</div>',document.body.appendChild(u),r=document.querySelector("#pl-volume").getContext("2d"),l=document.querySelector("#pl-seek").getContext("2d"),document.querySelector("#pl-volume").addEventListener("touchstart",f),document.querySelector("#pl-volume").addEventListener("touchmove",f),document.querySelector("#pl-volume").addEventListener("touchend",f),document.querySelector("#pl-seek").addEventListener("touchstart",c),document.querySelector("#pl-seek").addEventListener("touchmove",c),document.querySelector("#pl-seek").addEventListener("touchend",c),document.querySelector("#pl-pause-play").addEventListener("click",(function(){o.pause(),e.exports.guiUpdate()})),document.querySelector("#pl-loop-box").addEventListener("input",(function(){i.looping=document.querySelector("#pl-loop-box").checked,o.setLoop(i.looping)})),u.addEventListener("drag",(function(e){e.preventDefault()})),n.runGestureEngine(),n.registerOpEvent("seek",d),n.registerFinEvent("seek",p),n.registerOpEvent("volume",m),n.registerFinEvent("volume",g)};let v=null,y=null,w=-1,S=-1,b=null,k=-1,T=-1,_=null,C=-1,B=null;e.exports.guiUpdate=function(){if(u){B!==i.streamingDied&&(u.querySelector(".error").style.display=i.streamingDied?"flex":"none",B=i.streamingDied);let e=i.buffering||!i.ready;if(v!==e&&(u.querySelector("#gui-loading-bar").dataset.exists=e,v=e),y!==i.ready&&(u.querySelector('.guistate[data-guistate="preload"]').style.display=i.ready?"none":"block",u.querySelector('.guistate[data-guistate="ready"]').style.display=i.ready?"grid":"none",y=i.ready),!i.ready)return;let t=Math.round(84-84*i.volume);null!==s.volume&&(t=Math.round(84-84*s.volume)),t!==w&&(r.fillStyle="#444",r.fillRect(0,0,16,84),r.fillStyle="hsl(200, 85%, 55%)",r.fillRect(0,t,16,84),w=t);let a=Math.ceil(i.position/i.samples*254);null!==s.position&&(a=Math.ceil(s.position/i.samples*254));let n=Math.ceil(i.loaded/i.samples*254);a===S&&n===C||(l.fillStyle="#222",l.fillRect(0,0,254,16),l.fillStyle="#666",l.fillRect(0,0,Math.min(254,n),16),l.fillStyle="hsl(200, 85%, 55%)",l.fillRect(0,0,Math.min(254,a),16),S=a,C=n),b!==i.paused&&(u.querySelector("#pl-pause").style.display=i.paused?"none":"block",u.querySelector("#pl-play").style.display=i.paused?"block":"none",b=i.paused);let o=Math.floor(i.samples/i.sampleRate),h=Math.floor(i.position/i.sampleRate);null!==s.position&&(h=Math.floor(s.position/i.sampleRate)),o!==k&&(u.querySelector("#pl-time-end").innerText=`${Math.floor(o/60)}:${(o%60).toString().padStart(2,"0")}`,k=o),h!==T&&(u.querySelector("#pl-time-start").innerText=`${Math.floor(h/60)}:${(h%60).toString().padStart(2,"0")}`,T=h),_!==i.looping&&(u.querySelector("#pl-loop-box").checked=i.looping,_=i.looping)}}},function(e,t){let a=!1,n="",i=null,s=new Map,o=new Map;function r(e,t){let a=i.getBoundingClientRect(),n=e-a.x,s=t-a.y;return n<0&&(n=0),s<0&&(s=0),n>a.width&&(n=a.width),s>a.height&&(s=a.height),[n,s]}function l(e,t,a){if(s.has(e))for(let n=0;n<s.get(e).length;n++)s.get(e)[n](t,a)}e.exports.registerOpEvent=function(e,t){if(s.has(e)){let a=s.get(e);a.push(t),s.set(e,a)}else s.set(e,[t])},e.exports.registerFinEvent=function(e,t){if(o.has(e)){let a=o.get(e);a.push(t),o.set(e,a)}else o.set(e,[t])},e.exports.runGestureEngine=function(){document.addEventListener("mousedown",(function(e){if(e.target.dataset.gestureHitzone){a=!0,n=e.target.dataset.gestureHitzone,i=e.target;let[t,s]=r(e.clientX,e.clientY);l(n,t,s)}})),document.addEventListener("mousemove",(function(e){if(a){let[t,a]=r(e.clientX,e.clientY);l(n,t,a)}})),document.addEventListener("mouseup",(function(e){if(a){let[t,s]=r(e.clientX,e.clientY);!function(e,t,a){if(o.has(e))for(let n=0;n<o.get(e).length;n++)o.get(e)[n](t,a)}(n,t,s),a=!1,i=null,n=""}}))}}]);